@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme {
  --background-image-gradient-radial: radial-gradient(var(--tw-gradient-stops));
  --background-image-gradient-conic: conic-gradient(
    from 180deg at 50% 50%,
    var(--tw-gradient-stops)
  );

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* --- brand colors (original; preserved) --- */
  --color-brand-white: #ffffff;
  --color-brand-deep-navy: #090630;
  --color-brand-electric-purple: #9b1fe8;
  --color-brand-cloud-gray: #edeff7;
  --color-brand-smoke-gray: #d3d6e0;
  --color-brand-steel-gray: #bcbfcc;
  --color-brand-space-gray: #9da2b3;
  --color-brand-graphite-gray: #6e7180;
  --color-brand-arsenic-gray: #40424d;
  --color-brand-phantom: #1e1e24;
  --color-brand-black: #000000;

  /* Brand Aliases */
  --color-brand-bg: var(--brand-bg);
  --color-brand-surface: var(--brand-surface);
  --color-brand-muted-surface: var(--brand-muted-surface);
  --color-brand-border: var(--brand-border);
  --color-brand-text: var(--brand-text);
  --color-brand-heading: var(--brand-heading);
  --color-brand-accent: var(--brand-accent);
  --color-brand-deep: var(--brand-deep);
  --color-brand-graphite: var(--brand-graphite);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  --font-sans: var(--font-manrope), sans-serif;

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-fade-in: fade-in 1s ease-in-out 1 forwards;
  --animate-collapsible-down: slide-down 300ms ease-out;
  --animate-collapsible-up: slide-up 300ms ease-out;
  --animate-rise-up: rise-up 700ms ease-out forwards;
  --scroll-gutter: stable;
  @keyframes slide-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-collapsible-content-height);
    }
  }

  @keyframes slide-up {
    from {
      height: var(--radix-collapsible-content-height);
    }
    to {
      height: 0;
    }
  }
  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
  @keyframes fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
  @keyframes rise-up {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@layer utilities {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
    --scroll-gutter: stable;
    html {
      scrollbar-gutter: stable !important;
    }
    -webkit-tap-highlight-color: transparent !important;
    tap-highlight-color: transparent !important;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground-rgb: 255, 255, 255;
      --background-start-rgb: 0, 0, 0;
      --background-end-rgb: 0, 0, 0;
    }
  }
}

/* --------------------------
   BRAND ROLE ALIASES (safe)
   --------------------------
   These provide the role mapping I recommended earlier, but reference
   the existing --color-brand-* variables. They won't overwrite the
   original definitions and are safe to tweak later.
*/
:root {
  /* convenience aliases (referencing your existing brand tokens) */
  --brand-bg: var(--color-brand-cloud-gray, #edeff7);
  --brand-surface: var(--color-brand-white, #ffffff);
  --brand-muted-surface: var(--color-brand-smoke-gray, #d3d6e0);
  --brand-border: var(--color-brand-steel-gray, #bcbfcc);
  --brand-text: var(--color-brand-arsenic-gray, #40424d);
  --brand-heading: var(--color-brand-phantom, #1e1e24);
  --brand-accent: var(--color-brand-electric-purple, #9b1fe8);
  --brand-deep: var(--color-brand-deep-navy, #090630);
  --brand-graphite: var(--color-brand-graphite-gray, #6e7180);
  /* optional warm/off-white if you ever want a slightly different surface */
  /* --color-ice: #f6f7fb;  <-- uncomment if needed */
}

/* --------------------------
   Semantic HSL mapping for Tailwind / shadcn (Radix) variables
   --------------------------
   We set the HSL variables used by shadcn/radix to values derived
   from the brand palette so components pick up the brand automatically.
   This preserves the structure of your existing theme variables.
*/
@layer base {
  :root {
    /* Light theme: map semantic vars to brand cloud / white / arsenic */
    /* format: <hue> <saturation>% <lightness>%  (matches existing usage) */

    /* --background used by --color-background: use brand cloud */
    --background: 228 38.5% 94.9%; /* brand-cloud (#edeff7) */

    /* foreground / headings */
    --foreground: 230.8 9.2% 27.6%; /* brand-arsenic (#40424d) */
    --card: 0 0% 100%; /* keep card white */
    --card-foreground: 230.8 9.2% 27.6%; /* arsenic on white */

    --popover: 0 0% 100%;
    --popover-foreground: 230.8 9.2% 27.6%;

    /* primary used for main UI emphasis. We'll use phantom for neutral primary text */
    --primary: 240 9.1% 12.9%; /* brand-phantom (#1e1e24) */
    --primary-foreground: 0 0% 98%;

    /* secondary / muted surfaces */
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --muted: 226.2 17.3% 85.3%; /* brand-smoke (#d3d6e0) */
    --muted-foreground: 230 7.6% 46.7%; /* graphite for labels */

    --accent: 277 81.4% 51.6%; /* electric purple (#9b1fe8) as HSL */
    --accent-foreground: 0 0% 100%;

    /* destructive, border, input, ring left as your defaults but we map border/input to brand-steel */
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 228.8 13.6% 76.9%; /* brand-steel-ish (soft) */
    --input: 228.8 13.6% 76.9%;

    /* ring / charts keep existing fallback values */
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    --radius: 0.5rem;
  }

  /* Dark theme mapping: put main background to deep navy and adjust foregrounds */
  .dark {
    /* deep navy as background (converted to H S L) */
    --background: 244.3 77.8% 10.6%; /* brand-deep-navy (#090630) */
    --foreground: 0 0% 98%; /* white text */
    --card: 244.3 77.8% 10.6%; /* dark card if desired */
    --card-foreground: 0 0% 98%;
    --popover: 244.3 77.8% 10.6%;
    --popover-foreground: 0 0% 98%;

    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;

    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;

    --accent: 277 81.4% 51.6%; /* keep electric purple as accent in dark */
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;

    --ring: 0 0% 83.1%;

    /* charts adjusted in your original .dark block are preserved by not overriding here */
  }
  body {
    margin: 0 !important;
    padding: 0 !important;
  }

  html,
  body,
  :root {
    height: 100% !important;
  }
}

/* keep your original base rules that apply semantic tokens */
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    @apply min-w-full!;
  }
}
